{"version":3,"file":"static/js/987.9b3cca98.chunk.js","mappings":"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","sources":["webpack://socnet/./src/components/Messages/Messages.module.scss?b126","components/Messages/MessagesForm.jsx","components/Messages/Messages.jsx","components/Messages/MessagesContainer.tsx","webpack://socnet/./src/components/common/Textarea/Textarea.module.scss?a94a","components/common/Textarea/Textarea.tsx","hoc/withAuth.js","utilites/validators.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"Messages\":\"Messages_Messages__1EQQz\",\"friends\":\"Messages_friends__nEokc\",\"messages\":\"Messages_messages__ViKAd\",\"messagesBox\":\"Messages_messagesBox__UwwLl\",\"messageAvatar\":\"Messages_messageAvatar__pgT7y\",\"friend\":\"Messages_friend__XftjX\",\"active\":\"Messages_active__8HIPB\",\"avatar\":\"Messages_avatar__K6DLY\",\"name\":\"Messages_name__sHyXH\",\"message\":\"Messages_message__LQOQA\",\"messageBox\":\"Messages_messageBox__gSD3Y\",\"messageDate\":\"Messages_messageDate__CpBsr\",\"MessagesForm\":\"Messages_MessagesForm__zWKIY\",\"textarea\":\"Messages_textarea__tglNx\",\"btn\":\"Messages_btn__kwvO+\",\"box\":\"Messages_box__+4OW+\"};","import s from './Messages.module.scss';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport TextArea from '../common/Textarea/Textarea.tsx';\r\nimport { textValidator } from '../../utilites/validators';\r\nconst textValidator300 = textValidator(300)\r\n\r\nconst MessagesForm = (props) => {\r\n    const {handleSubmit} = props;\r\n    return (\r\n        <form className={s.MessagesForm} onSubmit={handleSubmit}>\r\n            <Field className={s.textarea} component={TextArea} name=\"message\" validate={[textValidator300]} />\r\n            <button className={s.btn} type=\"submit\">Send</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default reduxForm({form: 'messages'})(MessagesForm);","import s from \"./Messages.module.scss\";\r\nimport avatar from \"../../assets/avatar.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport MessagesForm from \"./MessagesForm\";\r\nimport userAvatar from '../../assets/avatar.png'\r\nimport { useEffect, useState } from \"react\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst Messages = (props) => {\r\n  const [messages, setMessages] = useState([])\r\n  let ws\r\n  useEffect(() => {\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    ws.addEventListener('message', (e) => {\r\n      setMessages((prev) => [...prev, ...JSON.parse(e.data)])\r\n    })\r\n  }, [])\r\n  console.log(messages)\r\n\r\n  const sendMessage = useCallback((message) => {\r\n    if (ws) ws.send(message)\r\n  }, [ws])\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className={s.Messages}>\r\n        <ul className={s.friends}>\r\n          {props.friends.length === 0 ? (\r\n            <p className={s.empty}>You don't have friends yet</p>\r\n          ) : (\r\n            props.friends.map((friend) => {\r\n              return (\r\n                <Link\r\n                  className={s.friend}\r\n                  key={friend.id}\r\n                  to={`/profile/${friend.id}`}\r\n                >\r\n                  <img\r\n                    src={friend.photos.small ? friend.photos.small : avatar}\r\n                    alt=\"\"\r\n                    className={s.avatar}\r\n                  />\r\n                  <p className={s.name}>{friend.name}</p>\r\n                </Link>\r\n              );\r\n            })\r\n          )}\r\n        </ul>\r\n        <div className={s.messages}>\r\n          <div className={s.messagesBox}>\r\n          {messages.map((message, index) => {\r\n            return (\r\n              <div className={s.message} key={index}>\r\n                <div className={s.messageBox}>\r\n                  <img src={message.photo || userAvatar} className={s.messageAvatar} />\r\n                  <span className={s.messageDate}>{message.userId}</span>\r\n                </div>\r\n                <p className={s.messageText}>{message.message}</p>\r\n              </div>\r\n            );\r\n          })}\r\n          </div>\r\n          <MessagesForm onSubmit={(data)=> sendMessage(data.message)} />\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Messages;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport withRedirect from \"../../hoc/withAuth\";\r\nimport Messages from \"./Messages\";\r\nimport { sendMessageThunk as sendMessage } from \"../../redux/profileReducer.ts\";\r\nimport { UserType, MessageType } from \"../../types/types\";\r\n\r\ntype PropsType = {\r\n  friends: UserType[] | [];\r\n  messages: MessageType[] | [];\r\n  dispatch: () => void;\r\n  sendMessage: () => void;\r\n  ws: any;\r\n};\r\n\r\nclass MessagesContainer extends React.Component<PropsType, any> {\r\n  render() {\r\n    return (\r\n      <Messages\r\n        messages={this.props.messages}\r\n        friends={this.props.friends}\r\n        sendMessage={this.props.sendMessage}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    friends: state.users.friends,\r\n    messages: state.profile.messages,\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  withRedirect,\r\n  connect(mapStateToProps, { sendMessage })\r\n)(MessagesContainer);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Textarea_container__8xwgg\",\"error\":\"Textarea_error__Zh8jH\"};","import React from 'react';\r\nimport s from './Textarea.module.scss';\r\n\r\nconst Textarea: React.FC = ({ input, meta, ...props }: any) => {\r\n  return (\r\n    <div className={s.container}>\r\n      {meta.error && meta.error.code === 0 && meta.touched && !meta.active && <p className={s.error}>{meta.error.message}</p>}\r\n      {meta.error && meta.error.code === 1 && <p className={s.error}>{meta.error.message}</p>}\r\n      {meta.error && meta.error.code === 2 && meta.touched && !meta.active && <p className={s.error}>{meta.error.message}</p>}\r\n      <textarea {...input} {...props}></textarea>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Textarea;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nconst withAuth = (Component)=> {\r\n    class withRedirect extends React.Component {\r\n        render() {\r\n            if (this.props.isAuth === false) {\r\n\r\n                return <Navigate to=\"/login\" />\r\n            }\r\n            return(\r\n                <Component  />\r\n            )\r\n        }\r\n    }\r\n    const mapStateToProps = (state)=> {\r\n        return {\r\n            isAuth: state.auth.isAuth,\r\n        }\r\n    }\r\n    return connect(mapStateToProps)(withRedirect);\r\n}\r\n\r\n\r\n\r\nexport default withAuth;","export const statusValidator = (status) => {\r\n  if (typeof status === \"string\") {\r\n    return /[a-zA-Z1-9]/.test(status) || status.length === 0;\r\n  }\r\n};\r\n\r\nexport const emailValidator = (email) => {\r\n  if (!(email && /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email))) {\r\n    return { code: 4, message: \"Invalid email address\" };\r\n  }\r\n};\r\n\r\nexport const textValidator = (maxLength) => (text) => {\r\n  if (!text) return { code: 0, message: \"Value mustn't be empty !\" };\r\n  if (text && text.length > maxLength)\r\n    return { code: 1, message: `Max length: ${maxLength} characters !` };\r\n  if (text && !/[a-zA-Z1-9]/.test(text))\r\n    return { code: 2, message: \"Value must contain numbers or letters !\" };\r\n  return undefined;\r\n};\r\n\r\nexport const authValidator = (login) => {\r\n  if (login && login.length < 4)\r\n    return { code: 2, message: \"Min length is 4 characters !\" };\r\n  if (login && login.length > 35)\r\n    return { code: 3, message: \"Max length is 35 characters !\" };\r\n  if (login && !/[a-zA-Z]/.test(login))\r\n    return { code: 1, message: \"Value must contain letters !\" };\r\n  if (!login) return { code: 0, message: \"This field is required\" };\r\n  return undefined;\r\n};\r\n"],"names":["textValidator300","textValidator","reduxForm","form","props","handleSubmit","className","s","onSubmit","Field","component","TextArea","name","validate","type","ws","useState","messages","setMessages","useEffect","WebSocket","addEventListener","e","prev","JSON","parse","data","console","log","sendMessage","useCallback","message","send","friends","length","map","friend","to","id","src","photos","small","avatar","alt","index","photo","userAvatar","userId","MessagesContainer","this","React","compose","withRedirect","connect","state","users","profile","input","meta","error","code","touched","active","Component","isAuth","auth","statusValidator","status","test","emailValidator","email","maxLength","text","authValidator","login"],"sourceRoot":""}
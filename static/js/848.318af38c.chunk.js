"use strict";(self.webpackChunksocnet=self.webpackChunksocnet||[]).push([[848],{8848:function(e,t,r){r.r(t),r.d(t,{default:function(){return q}});var o=r(5861),n=r(885),a=r(7757),s=r.n(a),i=r(2791),l={Profile:"Profile_Profile__72WZQ",user:"Profile_user__IPBVM",left:"Profile_left__757fi",avatar:"Profile_avatar__28yBI",name:"Profile_name__XHB5K",about:"Profile_about__Fu2hs",job:"Profile_job__c2UNi",contact:"Profile_contact__PiaJn",avatarBox:"Profile_avatarBox__62vhZ",avatarLabel:"Profile_avatarLabel__tORke",avatarInput:"Profile_avatarInput__Txtts",avatarError:"Profile_avatarError__27VGn",preloader:"Profile_preloader__x2vIF",rotate:"Profile_rotate__nghYB",title:"Profile_title__cDrI-",form:"Profile_form__kkSZz",textarea:"Profile_textarea__uC2wd",btn:"Profile_btn__xkJ1m",post:"Profile_post__6eHwe",postAvatar:"Profile_postAvatar__5HJ-x",text:"Profile_text__lnKJA",postBox:"Profile_postBox__z6w7U",likeBtn:"Profile_likeBtn__akHmO",likes:"Profile_likes__8C57l",followbtn:"Profile_followbtn__M19+A"},c=r(364),u=r(8308),f=r(1153),d="Status_statusBox__Bqyz8",p="Status_editable__DhYzb",h="Status_status__rJ2po",m="Status_error__wjohR",_="Status_empty__YIKZ-",v=r(184),x=function(e){var t=(0,i.useState)(""),r=(0,n.Z)(t,2),o=r[0],a=r[1],s=(0,i.useState)(!1),l=(0,n.Z)(s,2),c=l[0],u=l[1],x=(0,i.useState)(!1),b=(0,n.Z)(x,2),j=b[0],g=b[1];(0,i.useEffect)((function(){a(e.status)}),[e]);return(e.status||!e.readOnly)&&(0,v.jsxs)("div",{className:e.readOnly?d:"".concat(d," ").concat(p),onDoubleClick:function(){e.readOnly||u((function(e){return!e}))},children:[c?(0,v.jsx)("input",{type:"text",value:o,onChange:function(e){a(e.target.value),g(!(0,f.qB)(e.target.value))},onBlur:function(t){var r=(0,f.qB)(t.target.value);r&&(a(e.status),u((function(e){return!e}))),e.status!==o&&r&&e.changeStatus(t.target.value),(0,f.qB)(t.target.value)||g(!0)},autoFocus:!0}):(0,v.jsxs)("p",{className:h,children:[o,0===o.length&&!e.readOnly&&(0,v.jsx)("span",{className:_,children:"Click to set the status..."})]}),j&&(0,v.jsx)("p",{className:m,children:"Status must container letters or numbers and not exceed 300 characters"})]})},b=function(e){var t=[];for(var r in e.profile.contacts)t.push(e.profile.contacts[r]&&(0,v.jsxs)("p",{className:l.contact,children:[r,": ",(0,v.jsx)("span",{children:e.profile.contacts[r]})]},r));return(0,v.jsxs)("div",{className:l.user,children:[(0,v.jsxs)("div",{className:l.left,children:[(0,v.jsx)("img",{src:e.profile.photos.large||u,alt:"User Avatar",className:l.avatar}),!e.owner&&e.profile.followed&&(0,v.jsx)("button",{onClick:function(){return e.unfollowUser(e.profile.userId)},className:l.followbtn,disabled:e.followDisabled,children:"Unfollow"}),!e.owner&&!1===e.profile.followed&&(0,v.jsx)("button",{onClick:function(){return e.followUser(e.profile.userId)},disabled:e.followDisabled,className:l.followbtn,children:"Follow"}),e.owner&&(0,v.jsxs)("form",{className:l.avatarForm,children:[e.avatarError&&(0,v.jsx)("p",{className:l.avatarError,children:"Something went wrong... Please, try again"}),(0,v.jsxs)("div",{className:l.avatarBox,children:[(0,v.jsxs)("label",{htmlFor:"avatar",className:l.avatarLabel,children:["Change avatar",(0,v.jsx)("input",{className:l.avatarInput,placeholder:"Choose avatar",accept:".jpg, .jpeg, .png",onInput:function(t){return e.updateAvatar(t.target.files[0])},type:"file",name:"avatar",id:"avatar",disabled:e.avatarLoading})]}),e.avatarLoading&&(0,v.jsx)("span",{className:l.preloader})]})]})]}),(0,v.jsxs)("div",{className:l.right,children:[(0,v.jsx)("h1",{className:l.name,children:e.profile.fullName}),(0,v.jsx)(x,{status:e.profile.status,readOnly:e.myId!==e.profile.userId,changeStatus:e.changeStatus}),(0,v.jsx)("p",{className:l.about,children:e.profile.aboutMe}),e.profile.lookingForAJob&&(0,v.jsx)("p",{className:l.job,children:"Looking for a job"}),t]})]})},j=r(6139),g=r(704),y=r(9005),P=(0,f.bq)(500),w=(0,g.Z)({form:"posts"})((function(e){var t=e.handleSubmit;return(0,v.jsxs)("form",{className:l.form,onSubmit:t,children:[(0,v.jsx)(j.Z,{placeholder:"Write your post here...",className:l.textarea,name:"post",component:y.Z,validate:[P]}),(0,v.jsx)("button",{className:l.btn,type:"submit",children:"Add Post"})]})})),Z=function(e){return(0,v.jsxs)("div",{className:l.post,children:[(0,v.jsx)("img",{src:u,alt:"user avatar",className:l.postAvatar}),(0,v.jsx)("p",{className:l.text,children:e.post.text}),(0,v.jsxs)("div",{className:l.postBox,children:[(0,v.jsx)("button",{onClick:function(){return e.likePost(e.post.id)},className:l.likeBtn,children:"Like"}),(0,v.jsxs)("p",{className:l.likes,children:[e.post.likes," Likes"]})]})]})},N=i.memo((function(e){return(0,v.jsxs)("div",{className:l.Posts,children:[(0,v.jsx)("h2",{className:l.title,children:"MyPosts"}),(0,v.jsx)(w,{onSubmit:function(t){return e.addPost(t.post)}}),e.posts.map((function(t){return(0,v.jsx)(Z,{post:t,likePost:e.likePost},t.id)})).reverse()]})})),k=r(3268),S=r(7781),B=r(6508),I=r(8419),A=r(6871),O=r(5671),C=r(3144),E=r(136),F=r(5716),U="withErrorBoundary_error__tfdn7",D=function(e){(0,E.Z)(r,e);var t=(0,F.Z)(r);function r(e){var o;return(0,O.Z)(this,r),(o=t.call(this,e)).state={hasError:!1},o}return(0,C.Z)(r,[{key:"render",value:function(){return this.state.hasError?(0,v.jsx)("h1",{className:U,children:"An error occured ..."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),r}(i.Component),q=(0,S.qC)(k.Z,(0,c.$j)((function(e){return{profile:e.profile.profile,followDisabled:e.profile.followDisabled,posts:e.profile.posts,myId:e.auth.profile.id,isFetching:e.profile.isFetching}}),{setProfile:B.Xc,changeStatus:B.sH,addPost:B.Q_,likePost:B.T9,followUser:B.qh,unfollowUser:B.$1,updateAvatar:B.Pt}))((function(e){var t=parseInt((0,A.UO)()["*"],10);(0,i.useEffect)((function(){(!e.profile||e.profile.userId!==(t||e.myId))&&(t||e.myId)&&e.setProfile(t||e.myId)}),[e.myId,t]);var r=(0,i.useState)(!1),a=(0,n.Z)(r,2),c=a[0],u=a[1],f=(0,i.useState)(!1),d=(0,n.Z)(f,2),p=d[0],h=d[1],m=function(){var t=(0,o.Z)(s().mark((function t(r){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return u(!0),t.next=4,e.updateAvatar(r);case 4:o=t.sent,u(!1),0!==o&&h(!0),0===o&&h(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:l.Profile,children:[e.isFetching&&(0,v.jsx)(I.Z,{isFetching:e.isFetching}),e.profile&&(0,v.jsx)(b,{avatarLoading:c,avatarError:p,owner:!t,myId:e.myId,profile:e.profile,changeStatus:e.changeStatus,followUser:e.followUser,unfollowUser:e.unfollowUser,followDisabled:e.followDisabled,updateAvatar:m}),e.profile&&!t&&(0,v.jsx)(D,{children:(0,v.jsx)(N,{posts:e.posts,addPost:e.addPost,likePost:e.likePost})})]})}))},9005:function(e,t,r){r.d(t,{Z:function(){return c}});var o=r(1413),n=r(5987),a="Textarea_container__8xwgg",s="Textarea_error__Zh8jH",i=r(184),l=["input","meta"],c=function(e){var t=e.input,r=e.meta,c=(0,n.Z)(e,l);return(0,i.jsxs)("div",{className:a,children:[r.error&&0===r.error.code&&r.touched&&!r.active&&(0,i.jsx)("p",{className:s,children:r.error.message}),r.error&&1===r.error.code&&(0,i.jsx)("p",{className:s,children:r.error.message}),r.error&&2===r.error.code&&r.touched&&!r.active&&(0,i.jsx)("p",{className:s,children:r.error.message}),(0,i.jsx)("textarea",(0,o.Z)((0,o.Z)({},t),c))]})}},3268:function(e,t,r){var o=r(1413),n=r(5671),a=r(3144),s=r(136),i=r(5716),l=r(2791),c=r(364),u=r(6871),f=r(184);t.Z=function(e){var t=function(t){(0,s.Z)(l,t);var r=(0,i.Z)(l);function l(){return(0,n.Z)(this,l),r.apply(this,arguments)}return(0,a.Z)(l,[{key:"render",value:function(){return!1===this.props.isAuth?(0,f.jsx)(u.Fg,{to:"/login"}):(0,f.jsx)(e,(0,o.Z)({},this.props))}}]),l}(l.Component);return(0,c.$j)((function(e){return{isAuth:e.auth.isAuth}}))(t)}},1153:function(e,t,r){r.d(t,{Kb:function(){return s},Le:function(){return n},bq:function(){return a},qB:function(){return o}});var o=function(e){if("string"===typeof e)return/[a-zA-Z1-9]/.test(e)||0===e.length},n=function(e){if(!e||!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e))return{code:4,message:"Invalid email address"}},a=function(e){return function(t){return t?t&&t.length>e?{code:1,message:"Max length: ".concat(e," characters !")}:t&&!/[a-zA-Z1-9]/.test(t)?{code:2,message:"Value must contain numbers or letters !"}:void 0:{code:0,message:"Value mustn't be empty !"}}},s=function(e){return e&&e.length<4?{code:2,message:"Min length is 4 characters !"}:e&&e.length>35?{code:3,message:"Max length is 35 characters !"}:e&&!/[a-zA-Z]/.test(e)?{code:1,message:"Value must contain letters !"}:e?void 0:{code:0,message:"This field is required"}}},5671:function(e,t,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:function(){return o}})},5716:function(e,t,r){function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=o(e);if(t){var s=o(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return a(this,r)}}r.d(t,{Z:function(){return s}})},136:function(e,t,r){r.d(t,{Z:function(){return n}});var o=r(9611);function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,o.Z)(e,t)}}}]);
//# sourceMappingURL=848.318af38c.chunk.js.map
"use strict";(self.webpackChunksocnet=self.webpackChunksocnet||[]).push([[640],{3640:function(e,t,r){r.r(t),r.d(t,{default:function(){return Y}});var a=r(5861),o=r(885),n=r(7757),s=r.n(n),l=r(2791),i={Profile:"Profile_Profile__72WZQ",user:"Profile_user__IPBVM",left:"Profile_left__757fi",right:"Profile_right__3YYRY",avatar:"Profile_avatar__28yBI",name:"Profile_name__XHB5K",about:"Profile_about__Fu2hs",avatarBox:"Profile_avatarBox__62vhZ",avatarLabel:"Profile_avatarLabel__tORke",avatarInput:"Profile_avatarInput__Txtts",avatarError:"Profile_avatarError__27VGn",preloader:"Profile_preloader__x2vIF",rotate:"Profile_rotate__nghYB",title:"Profile_title__cDrI-",form:"Profile_form__kkSZz",textarea:"Profile_textarea__uC2wd",btn:"Profile_btn__xkJ1m",post:"Profile_post__6eHwe",postAvatar:"Profile_postAvatar__5HJ-x",text:"Profile_text__lnKJA",postBox:"Profile_postBox__z6w7U",likeBtn:"Profile_likeBtn__akHmO",likes:"Profile_likes__8C57l",followbtn:"Profile_followbtn__M19+A"},c=r(364),u={Form:"ProfileForm_Form__lr65t",editEnableBtn:"ProfileForm_editEnableBtn__f1dYi",wrapper:"ProfileForm_wrapper__xPJFc",box:"ProfileForm_box__mLrhv",title:"ProfileForm_title__udn3w",value:"ProfileForm_value__JwS4S",job:"ProfileForm_job__MDIrV",label:"ProfileForm_label__Klnm+",checkbox:"ProfileForm_checkbox__e0z5R",contacts:"ProfileForm_contacts__9YBeO",contactsTitle:"ProfileForm_contactsTitle__1bwAv",textarea:"ProfileForm_textarea__UQJEL",editDisableBtn:"ProfileForm_editDisableBtn__+viFn",submitBtn:"ProfileForm_submitBtn__suD+Q",error:"ProfileForm_error__TVbT6"},f=r(1694),d=r.n(f),m=r(8419),p=r(184),h=function(e){var t=e.contactTitle,r=e.contactValue,a=e.editMode,n=(0,l.useState)(r||""),s=(0,o.Z)(n,2),i=s[0],c=s[1];return(0,p.jsxs)("div",{className:u.box,children:[(0,p.jsxs)("p",{className:u.title,children:[t," :"]}),a?(0,p.jsx)("input",{type:"text",value:i,onChange:function(e){return c(e.target.value)},name:t,placeholder:"Your ".concat(t),className:u.input}):(0,p.jsx)("a",{className:u.value,href:r,target:"_blank",children:r})]})},_=function(e){var t=e.profile,r=e.editable,n=e.editProfile,i=e.setProfileInfo,c=(0,l.useState)(!1),f=(0,o.Z)(c,2),_=f[0],v=f[1],x=(0,l.useState)(!1),b=(0,o.Z)(x,2),g=b[0],j=b[1],P=(0,l.useState)([]),y=(0,o.Z)(P,2),N=y[0],k=y[1],w=(0,l.useState)(t.fullName||""),Z=(0,o.Z)(w,2),F=Z[0],S=Z[1],B=(0,l.useState)(t.aboutMe||""),A=(0,o.Z)(B,2),I=A[0],C=A[1],E=(0,l.useState)(t.lookingForAJob),D=(0,o.Z)(E,2),O=D[0],J=D[1],L=(0,l.useState)(t.lookingForAJobDescription||""),T=(0,o.Z)(L,2),U=T[0],M=T[1],R=function(){var e=(0,a.Z)(s().mark((function e(t){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={fullName:t.target[0].value,aboutMe:t.target[1].value,lookingForAJob:t.target[2].checked,lookingForAJobDescription:t.target[3].value,contacts:{facebook:t.target[4].value,website:t.target[5].value,vk:t.target[6].value,twitter:t.target[7].value,instagram:t.target[8].value,youtube:t.target[9].value,github:t.target[10].value,mainLink:t.target[11].value}},j(!0),e.next=4,n(r);case 4:a=e.sent,j(!1),0===a.resultCode&&(k([]),v(!1),i(r)),0!==a.resultCode&&k(a.messages),console.log(r),console.log(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)("form",{className:u.Form,onSubmit:function(e){e.preventDefault(),R(e)},children:[N.map((function(e){return(0,p.jsx)("div",{className:u.error,children:e})})),(0,p.jsxs)("div",{className:u.wrapper,children:[(0,p.jsxs)("div",{className:u.box,children:[(0,p.jsx)("p",{className:u.title,children:"name: "}),_?(0,p.jsx)("input",{value:F,onChange:function(e){return S(e.target.value)},name:"fullName",placeholder:"Your name",className:u.input}):(0,p.jsx)("p",{className:u.value,children:t.fullName})]}),(0,p.jsxs)("div",{className:u.box,children:[(0,p.jsx)("p",{className:u.title,children:"About me: "}),_?(0,p.jsx)("textarea",{value:I,onChange:function(e){return C(e.target.value)},name:"aboutMe",placeholder:"About you",className:u.textarea}):(0,p.jsx)("p",{className:u.value,children:t.aboutMe})]}),!_&&(0,p.jsxs)("div",{className:u.box,children:[(0,p.jsx)("p",{className:u.title,children:"User Id: "}),(0,p.jsx)("p",{className:u.value,children:t.userId})]}),(0,p.jsx)("div",{className:u.box,children:_?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("label",{className:d()(u.title,u.label),htmlFor:"job",children:"Looking for a job:"}),(0,p.jsx)("input",{checked:O,value:O,onChange:function(e){return J(e.target.checked)},className:u.checkbox,name:"lookingForAJob",id:"job",type:"checkbox"})]}):(0,p.jsx)("p",{className:u.job,children:t.lookingForAJob?"Looking for a job":null})}),(0,p.jsxs)("div",{className:u.box,children:[(0,p.jsx)("p",{className:u.title,children:"Skills: "}),_?(0,p.jsx)("textarea",{value:U,onChange:function(e){return M(e.target.value)},name:"lookingForAJobDescription",placeholder:"Your skills",className:u.textarea}):(0,p.jsx)("p",{className:u.value,children:t.lookingForAJobDescription})]}),(0,p.jsx)("div",{className:u.contacts,children:Object.keys(t.contacts).map((function(e){return(t.contacts[e]||_)&&(0,p.jsx)(h,{contactTitle:e,contactValue:t.contacts[e],editMode:_},e)}))}),(0,p.jsx)(m.Z,{isFetching:g&&_}),_&&!g&&(0,p.jsx)("button",{type:"submit",className:u.submitBtn,children:"Save changes"})]}),!_&&r&&(0,p.jsx)("button",{onClick:function(){return v(!0)},className:u.editEnableBtn,children:"Enable Edit mode"}),_&&(0,p.jsx)("button",{onClick:function(){return v(!1)},className:u.editDisableBtn,children:"Disable Edit mode"})]})},v=r(8308),x=r(1153),b="Status_statusBox__Bqyz8",g="Status_editable__DhYzb",j="Status_status__rJ2po",P="Status_error__wjohR",y="Status_empty__YIKZ-",N=function(e){var t=(0,l.useState)(""),r=(0,o.Z)(t,2),a=r[0],n=r[1],s=(0,l.useState)(!1),i=(0,o.Z)(s,2),c=i[0],u=i[1],f=(0,l.useState)(!1),d=(0,o.Z)(f,2),m=d[0],h=d[1];(0,l.useEffect)((function(){n(e.status)}),[e]);return(e.status||!e.readOnly)&&(0,p.jsxs)("div",{className:e.readOnly?b:"".concat(b," ").concat(g),onClick:function(){e.readOnly||u((function(e){return!e}))},children:[c?(0,p.jsx)("input",{type:"text",value:a,onChange:function(e){n(e.target.value),h(!(0,x.qB)(e.target.value))},onBlur:function(t){var r=(0,x.qB)(t.target.value);r&&(n(e.status),u((function(e){return!e}))),e.status!==a&&r&&e.changeStatus(t.target.value),(0,x.qB)(t.target.value)||h(!0)},autoFocus:!0}):(0,p.jsxs)("p",{className:j,children:[a,0===a.length&&!e.readOnly&&(0,p.jsx)("span",{className:y,children:"Click to set the status..."})]}),m&&(0,p.jsx)("p",{className:P,children:"Status must container letters or numbers and not exceed 300 characters"})]})},k=function(e){return(0,p.jsxs)("div",{className:i.user,children:[(0,p.jsxs)("div",{className:i.left,children:[(0,p.jsx)("img",{src:e.profile.photos.large||v,alt:"User Avatar",className:i.avatar}),!e.owner&&e.profile.followed&&(0,p.jsx)("button",{onClick:function(){return e.unfollowUser(e.profile.userId)},className:i.followbtn,disabled:e.followDisabled,children:"Unfollow"}),!e.owner&&!1===e.profile.followed&&(0,p.jsx)("button",{onClick:function(){return e.followUser(e.profile.userId)},disabled:e.followDisabled,className:i.followbtn,children:"Follow"}),e.owner&&(0,p.jsxs)("form",{className:i.avatarForm,children:[e.avatarError&&(0,p.jsx)("p",{className:i.avatarError,children:"Something went wrong... Please, try again"}),(0,p.jsxs)("div",{className:i.avatarBox,children:[(0,p.jsxs)("label",{htmlFor:"avatar",className:i.avatarLabel,children:["Change avatar",(0,p.jsx)("input",{className:i.avatarInput,placeholder:"Choose avatar",accept:".jpg, .jpeg, .png",onInput:function(t){return e.updateAvatar(t.target.files[0])},type:"file",name:"avatar",id:"avatar",disabled:e.avatarLoading})]}),e.avatarLoading&&(0,p.jsx)("span",{className:i.preloader})]})]})]}),(0,p.jsxs)("div",{className:i.right,children:[(0,p.jsx)("h1",{className:i.name,children:e.profile.fullName}),(0,p.jsx)(N,{status:e.profile.status,readOnly:e.myId!==e.profile.userId,changeStatus:e.changeStatus}),(0,p.jsx)(_,{editProfile:e.editProfile,profile:e.profile,editable:e.owner,setProfileInfo:e.setProfileInfo})]})]})},w=r(6139),Z=r(704),F=r(9005),S=(0,x.bq)(500),B=(0,Z.Z)({form:"posts"})((function(e){var t=e.handleSubmit;return(0,p.jsxs)("form",{className:i.form,onSubmit:t,children:[(0,p.jsx)(w.Z,{placeholder:"Write your post here...",className:i.textarea,name:"post",component:F.Z,validate:[S]}),(0,p.jsx)("button",{className:i.btn,type:"submit",children:"Add Post"})]})})),A=function(e){return(0,p.jsxs)("div",{className:i.post,children:[(0,p.jsx)("img",{src:v,alt:"user avatar",className:i.postAvatar}),(0,p.jsx)("p",{className:i.text,children:e.post.text}),(0,p.jsxs)("div",{className:i.postBox,children:[(0,p.jsx)("button",{onClick:function(){return e.likePost(e.post.id)},className:i.likeBtn,children:"Like"}),(0,p.jsxs)("p",{className:i.likes,children:[e.post.likes," Likes"]})]})]})},I=l.memo((function(e){return(0,p.jsxs)("div",{className:i.Posts,children:[(0,p.jsx)("h2",{className:i.title,children:"MyPosts"}),(0,p.jsx)(B,{onSubmit:function(t){return e.addPost(t.post)}}),e.posts.map((function(t){return(0,p.jsx)(A,{post:t,likePost:e.likePost},t.id)})).reverse()]})})),C=r(3268),E=r(7781),D=r(6508),O=r(6871),J=r(5671),L=r(3144),T=r(136),U=r(5716),M="withErrorBoundary_error__tfdn7",R=function(e){(0,T.Z)(r,e);var t=(0,U.Z)(r);function r(e){var a;return(0,J.Z)(this,r),(a=t.call(this,e)).state={hasError:!1},a}return(0,L.Z)(r,[{key:"render",value:function(){return this.state.hasError?(0,p.jsx)("h1",{className:M,children:"An error occured ..."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),r}(l.Component),Y=(0,E.qC)(C.Z,(0,c.$j)((function(e){return{profile:e.profile.profile,followDisabled:e.profile.followDisabled,posts:e.profile.posts,myId:e.auth.profile.id,isFetching:e.profile.isFetching}}),{setProfileInfo:D.mr,editProfile:D.Rk,setProfile:D.Xc,changeStatus:D.sH,addPost:D.Q_,likePost:D.T9,followUser:D.qh,unfollowUser:D.$1,updateAvatar:D.Pt}))((function(e){var t=parseInt((0,O.UO)()["*"],10);(0,l.useEffect)((function(){(!e.profile||e.profile.userId!==(t||e.myId))&&(t||e.myId)&&e.setProfile(t||e.myId)}),[e.myId,t]);var r=(0,l.useState)(!1),n=(0,o.Z)(r,2),c=n[0],u=n[1],f=(0,l.useState)(!1),d=(0,o.Z)(f,2),h=d[0],_=d[1],v=function(){var t=(0,a.Z)(s().mark((function t(r){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return u(!0),t.next=4,e.updateAvatar(r);case 4:a=t.sent,u(!1),0!==a&&_(!0),0===a&&_(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:i.Profile,children:[e.isFetching&&(0,p.jsx)(m.Z,{isFetching:e.isFetching}),e.profile&&(0,p.jsx)(k,{setProfileInfo:e.setProfileInfo,editProfile:e.editProfile,avatarLoading:c,avatarError:h,owner:!t,myId:e.myId,profile:e.profile,changeStatus:e.changeStatus,followUser:e.followUser,unfollowUser:e.unfollowUser,followDisabled:e.followDisabled,updateAvatar:v}),e.profile&&!t&&(0,p.jsx)(R,{children:(0,p.jsx)(I,{posts:e.posts,addPost:e.addPost,likePost:e.likePost})})]})}))},9005:function(e,t,r){r.d(t,{Z:function(){return c}});var a=r(1413),o=r(5987),n="Textarea_container__8xwgg",s="Textarea_error__Zh8jH",l=r(184),i=["input","meta"],c=function(e){var t=e.input,r=e.meta,c=(0,o.Z)(e,i);return(0,l.jsxs)("div",{className:n,children:[r.error&&0===r.error.code&&r.touched&&!r.active&&(0,l.jsx)("p",{className:s,children:r.error.message}),r.error&&1===r.error.code&&(0,l.jsx)("p",{className:s,children:r.error.message}),r.error&&2===r.error.code&&r.touched&&!r.active&&(0,l.jsx)("p",{className:s,children:r.error.message}),(0,l.jsx)("textarea",(0,a.Z)((0,a.Z)({},t),c))]})}},3268:function(e,t,r){var a=r(1413),o=r(5671),n=r(3144),s=r(136),l=r(5716),i=r(2791),c=r(364),u=r(6871),f=r(184);t.Z=function(e){var t=function(t){(0,s.Z)(i,t);var r=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),r.apply(this,arguments)}return(0,n.Z)(i,[{key:"render",value:function(){return!1===this.props.isAuth?(0,f.jsx)(u.Fg,{to:"/login"}):(0,f.jsx)(e,(0,a.Z)({},this.props))}}]),i}(i.Component);return(0,c.$j)((function(e){return{isAuth:e.auth.isAuth}}))(t)}},1153:function(e,t,r){r.d(t,{Kb:function(){return s},Le:function(){return o},bq:function(){return n},qB:function(){return a}});var a=function(e){if("string"===typeof e)return/[a-zA-Z1-9]/.test(e)||0===e.length},o=function(e){if(!e||!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e))return{code:4,message:"Invalid email address"}},n=function(e){return function(t){return t?t&&t.length>e?{code:1,message:"Max length: ".concat(e," characters !")}:t&&!/[a-zA-Z1-9]/.test(t)?{code:2,message:"Value must contain numbers or letters !"}:void 0:{code:0,message:"Value mustn't be empty !"}}},s=function(e){return e&&e.length<4?{code:2,message:"Min length is 4 characters !"}:e&&e.length>35?{code:3,message:"Max length is 35 characters !"}:e&&!/[a-zA-Z]/.test(e)?{code:1,message:"Value must contain letters !"}:e?void 0:{code:0,message:"This field is required"}}},5671:function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:function(){return a}})},5716:function(e,t,r){function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=a(e);if(t){var s=a(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return n(this,r)}}r.d(t,{Z:function(){return s}})},136:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(9611);function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,a.Z)(e,t)}}}]);
//# sourceMappingURL=640.0cf509d6.chunk.js.map